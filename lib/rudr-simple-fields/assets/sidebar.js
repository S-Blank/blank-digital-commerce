(()=>{"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=window.wp.components,n=t.Button,a=t.Spinner,r=t.BaseControl,l=window.wp.blockEditor,o=l.MediaUpload,c=l.MediaUploadCheck,i=window.wp.data,u=i.useSelect,m=i.useDispatch;const s=function(t){var l=u((function(e){var n=e("core/editor").getEditedPostAttribute("meta")[t.metaKey]||t.default;return{imageId:n,image:e("core").getMedia(n)}})),i=l.imageId,s=l.image,d=m("core/editor",[i]).editPost;return React.createElement(r,{label:t.label},React.createElement(c,null,React.createElement(o,{onSelect:function(n){return d({meta:e({},t.metaKey,n.id)})},allowedTypes:["image"],value:i,render:function(e){var t=e.open;return React.createElement("div",null,!i&&React.createElement(n,{variant:"secondary",onClick:t},"Upload image"),!!i&&!s&&React.createElement("p",{style:{marginBottom:"5px"}},React.createElement(a,null)),!!s&&s&&React.createElement(n,{variant:"link",onClick:t},React.createElement("img",{src:s.source_url})))}})),!!i&&React.createElement(n,{onClick:function(){return d({meta:e({},t.metaKey,0)})},isLink:!0,isDestructive:!0},"Remove image"))};function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=window.wp.components,p=f.Button,b=f.Spinner,y=f.BaseControl,g=window.wp.blockEditor,v=g.MediaUpload,h=g.MediaUploadCheck,E=window.wp.data,R=E.useSelect,w=E.useDispatch;const C=function(e){var t=R((function(t){var n=t("core/editor").getEditedPostAttribute("meta")[e.metaKey],a=[];return n.forEach((function(e){var n=t("core").getMedia(e);n&&a.push(n)})),{imageIds:n,images:a}})),n=t.imageIds,a=t.images,r=w("core/editor",[n]).editPost;return React.createElement(y,{label:e.label},React.createElement(h,null,React.createElement(v,{onSelect:function(t){return r({meta:d({},e.metaKey,t.map((function(e){return e.id})))})},allowedTypes:["image"],multiple:"add",value:n,render:function(t){var l=t.open;return React.createElement(React.Fragment,null,React.createElement("div",{className:"simple-sb-gallery-field"},n.length>0&&0===a.length&&React.createElement("p",{style:{marginBottom:"10px"}},React.createElement(b,null)),!!a&&a.length>0&&a.map((function(t){return React.createElement("div",{"data-id":t.id,onClick:function(e){var t=document.querySelectorAll(".simple-gallery-active");if(t)for(var n=0;n<t.length;n++)t[n].classList.remove("simple-gallery-active");e.currentTarget.classList.add("simple-gallery-active")}},React.createElement("img",{src:t.source_url}),React.createElement("a",{onClick:function(){r({meta:d({},e.metaKey,n.filter((function(e){return e!==t.id})))})}},"Ã—"))}))),React.createElement(p,{variant:"secondary",onClick:l},"Add images"))}})))};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=wp.data,A=j.useSelect,K=j.useDispatch,M=wp.components,x=M.TextControl,V=M.CheckboxControl,T=M.SelectControl,B=M.TextareaControl,D=M.Button,I=M.Spinner,U=M.BaseControl,_=window.wp.blockEditor,N=_.MediaUpload,L=_.MediaUploadCheck;const F=function(e){var t=A((function(t){var n,a=null===(n=t("core/editor").getEditedPostAttribute("meta"))||void 0===n?void 0:n[e.metaKey],r=[];return a.map((function(n,l){e.subfields.map((function(e){if("image"==e.type&&a[l][e.id]){var n=t("core").getMedia(a[l][e.id]);n&&r.push(n)}}))})),{repeaterValues:a,images:r}})),n=t.repeaterValues,a=t.images,r=K("core/editor",[n]).editPost;return React.createElement(U,{label:e.label},n.map((function(t,l){return React.createElement("div",{style:{marginBottom:"20px"}},React.createElement("strong",null,e.itemName?e.itemName:"Group"," ",l+1),e.subfields.map((function(t){var o,c,i=n[l][t.id]?n[l][t.id]:"";switch(t.type){case"textarea":return React.createElement(B,{label:t.label,value:i,rows:t.rows,onChange:function(a){n=n.map((function(e,n){return n===l?S(S({},e),{},P({},t.id,a)):e})),r({meta:P({},e.metaKey,n)})}});case"select":for(var u=[],m=0,s=Object.entries(t.options);m<s.length;m++){var d=(o=s[m],c=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw r}}return l}}(o,c)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(o,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=d[0],p=d[1];u.push({label:p,value:f})}return React.createElement(T,{label:t.label,value:i,options:u,onChange:function(a){n=n.map((function(e,n){return n===l?S(S({},e),{},P({},t.id,a)):e})),r({meta:P({},e.metaKey,n)})}});case"checkbox":return React.createElement(V,{label:t.label,checked:i,onChange:function(a){n=n.map((function(e,n){return n===l?S(S({},e),{},P({},t.id,a)):e})),r({meta:P({},e.metaKey,n)})}});case"image":var b=n[l][t.id],y=null;return b&&(y=a.find((function(e){return e.id===b}))),React.createElement(U,{label:t.label},React.createElement(L,null,React.createElement(N,{onSelect:function(a){n=n.map((function(e,n){return n===l?S(S({},e),{},P({},t.id,a.id)):e})),r({meta:P({},e.metaKey,n)})},allowedTypes:["image"],value:b,render:function(e){var t=e.open;return React.createElement("div",null,!b&&React.createElement(D,{variant:"secondary",onClick:t},"Upload image"),!!b&&!y&&React.createElement("p",{style:{marginBottom:"5px"}},React.createElement(I,null)),!!y&&y&&React.createElement(D,{variant:"link",onClick:t},React.createElement("img",{src:y.source_url})))}})),!!b&&React.createElement(D,{onClick:function(){n=n.map((function(e,n){return n===l?S(S({},e),{},P({},t.id,0)):e})),r({meta:P({},e.metaKey,n)})},isLink:!0,isDestructive:!0},"Remove image"));default:return React.createElement(x,{label:t.label,value:i,onChange:function(a){n=n.map((function(e,n){return n===l?S(S({},e),{},P({},t.id,a)):e})),r({meta:P({},e.metaKey,n)})}})}})),React.createElement(D,{isLink:!0,isDestructive:!0,onClick:function(){n=n.filter((function(e,t){return t!==l})),r({meta:P({},e.metaKey,n)})}},"Remove line ",l+1))})),React.createElement(D,{variant:"secondary",onClick:function(){n.push({}),n=n.splice(0),r({meta:P({},e.metaKey,n)})}},"Add ",e.itemName?e.itemName:"Item"))};function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){var t=e.plugins.registerPlugin,n=e.editPost,a=n.PluginSidebar,r=n.PluginSidebarMoreMenuItem,l=e.element.Fragment,o=e.components,c=o.PanelBody,i=o.TextControl,u=o.TextareaControl,m=o.CheckboxControl,d=o.SelectControl,f=o.RadioControl,p=o.BaseControl,b=e.data,y=b.withSelect,g=b.withDispatch,v=(0,e.compose.compose)(g((function(e,t){return{setMetaValue:function(n){e("core/editor").editPost({meta:q({},t.metaKey,n)})}}})),y((function(e,t){return{metaValue:e("core/editor").getEditedPostAttribute("meta")[t.metaKey]||t.default}})))((function(e){switch(e.type){case"textarea":return React.createElement(u,{label:e.label,value:e.metaValue,rows:e.rows,onChange:function(t){e.setMetaValue(t)}});case"select":for(var t=[],n=0,a=Object.entries(e.options);n<a.length;n++){var r=G(a[n],2),l=r[0],o=r[1];t.push({label:o,value:l})}return React.createElement(d,{label:e.label,value:e.metaValue,options:t,onChange:function(t){e.setMetaValue(t)}});case"radio":for(var c=[],s=0,b=Object.entries(e.options);s<b.length;s++){var y=G(b[s],2),g=y[0],v=y[1];c.push({label:v,value:g})}return React.createElement(f,{label:e.label,selected:e.metaValue,options:c,onChange:function(t){e.setMetaValue(t)}});case"checkbox":return React.createElement(m,{label:e.label,checked:e.metaValue,onChange:function(t){e.setMetaValue(t)}});case"checklist":for(var h=e.metaValue,E=[],R=0,w=Object.entries(e.options);R<w.length;R++){var C=G(w[R],2),k=C[0],O=C[1];E.push({label:O,value:k})}return React.createElement(p,{label:e.label},E.map((function(t,n){return React.createElement(m,{label:t.label,checked:!!h.includes(t.value),onChange:function(n){h=h.filter((function(e){return e!==t.value})),n&&h.push(t.value),e.setMetaValue(h)}})})));default:return React.createElement(i,{type:"text",label:e.label,value:e.metaValue,onChange:function(t){e.setMetaValue(t)}})}}));GutenbergSidebarData.sidebars.map((function(e){var n=y((function(e){return{postType:e("core/editor").getCurrentPostType()}}))((function(t){var n=t.postType;return Array.isArray(e.post_type)&&0!==e.post_type.length&&!e.post_type.includes(n)?null:React.createElement(l,null,React.createElement(r,{target:e.id,icon:e.icon},e.name),React.createElement(a,{name:e.id,title:e.name,icon:e.icon},e.sections.map((function(e){return React.createElement(c,{title:e.name,initialOpen:e.opened},e.fields.map((function(e){switch(e.type){case"image":return React.createElement(s,{metaKey:e.id,label:e.label,default:e.default});case"gallery":return React.createElement(C,{metaKey:e.id,label:e.label,default:e.default});case"repeater":return React.createElement(F,{metaKey:e.id,label:e.label,itemName:e.item_name,subfields:e.subfields});default:return React.createElement(v,{type:e.type,label:e.label,metaKey:e.id,default:e.default,options:e.options,rows:e.rows})}})))}))))}));t(e.id,{render:n})}))}(window.wp)})();